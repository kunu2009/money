<!DOCTYPE html>
<html>
<head>
    <title>Gemini API Model Tester</title>
</head>
<body>
    <h1>Gemini API Model Tester</h1>
    <input type="password" id="apiKey" placeholder="Enter API Key">
    <button onclick="listModels()">List Available Models</button>
    <button onclick="testModel()">Test Model</button>
    <div id="result"></div>

    <script>
        async function listModels() {
            const apiKey = document.getElementById('apiKey').value;
            const result = document.getElementById('result');
            
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1/models?key=${apiKey}`);
                const data = await response.json();
                result.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            } catch (error) {
                result.innerHTML = 'Error: ' + error.message;
            }
        }

        async function testModel() {
            const apiKey = document.getElementById('apiKey').value;
            const result = document.getElementById('result');
            
            // Test different model names and API versions
            const modelsToTest = [
                // v1 API
                { version: 'v1', model: 'gemini-1.5-flash-latest' },
                { version: 'v1', model: 'gemini-1.5-flash' },
                { version: 'v1', model: 'gemini-1.5-flash-001' },
                { version: 'v1', model: 'gemini-1.0-pro' },
                { version: 'v1', model: 'gemini-pro' },
                // v1beta API
                { version: 'v1beta', model: 'gemini-1.5-flash-latest' },
                { version: 'v1beta', model: 'gemini-1.5-flash' },
                { version: 'v1beta', model: 'gemini-1.5-flash-001' },
                { version: 'v1beta', model: 'gemini-1.0-pro-latest' },
                { version: 'v1beta', model: 'gemini-1.0-pro' },
                { version: 'v1beta', model: 'gemini-pro' }
            ];
            
            result.innerHTML = 'Testing models...<br>';
            
            for (const {version, model} of modelsToTest) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/${version}/models/${model}:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: 'Hello' }] }]
                        })
                    });
                    
                    if (response.ok) {
                        result.innerHTML += `✅ ${version}/${model} - WORKS<br>`;
                        break; // Stop at first working model
                    } else {
                        const error = await response.json();
                        result.innerHTML += `❌ ${version}/${model} - ${error.error?.message || response.status}<br>`;
                    }
                } catch (error) {
                    result.innerHTML += `❌ ${version}/${model} - ${error.message}<br>`;
                }
            }
        }
    </script>
</body>
</html>